## 网络中断（无FIN包）
1. 可能路由器会发一个ICMP报文，让read或者write返回不可达错误
2. 如果没有ICMP报文，就只能死等了，这时候可以用心跳或者超时来解决问题
3. 如果第一次write失败，连接已经异常了，再write会返回一个SIGPIPE

## 对方直接挂掉（无FIN包）
1. 可能路由器会发一个ICMP报文，让read或者write返回不可达错误
2. 如果没有ICMP报文，就只能死等了，这时候可以用心跳或者超时来解决问题
3. 如果系统崩溃后又重启，对端会对write返回一个RST，对read返回一个连接重置错误，如果再次write也会返回一个SIGPIPE

## 对端显式关闭连接（有FIN包）
1. 客户端只read，对端关闭套接字时调用read，对端会通过返回EOF通知，此时read返回0
2. 客户端write后马上read，对端关闭套接字时调用write，异常仍然需要通过read来感知，此时read返回0（因为FIN包只意味着对方不再发消息，自己还可以发）
3. 客户端只write，如果对端关闭了套接字就会返回一个RST，此时如果再write就会返回SIGPIPE