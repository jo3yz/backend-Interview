## tcp的keepalive
是一种通过心跳包实现的链路保活机制，是传输层的一个选项，出现原因是因为TCP默认情况下如果没有数据往来，连接就是静默的，只有通过心跳包的方式才能探查到连接是否已经因为外力作用而失效（路由器重启、主机崩溃等）

## http的keepalive
- 这是http的一个选项，如果它没有开启，单次http请求就是短连接：三次握手->发送数据->四次挥手
- 缺陷显而易见，基于tcp的短连接通信成本太高
- 开启了这个选项后，server和client之间的多次http通信都可以复用同一个tcp连接

## 在keepalive下如何判断一次http请求已经收完了？
- http是一个基于tcp的应用层协议，而tcp是基于stream的，如果连接一直存在，就无法通过read返回0来判断一次tcp关闭而认为http请求结束。
- tlv协议的思路，采用Content-Length选项来作为接收数据的计数器初始值

## keepalive还有什么好处？
发送http请求就不用blocking了，如果对http请求进行编号，那么不需要在1号请求返回后才能继续发送2号请求，可以直接连续发，异步收就行了